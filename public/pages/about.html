<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: transparent;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }

        html {
            perspective: 1000px;
            background: transparent;
            overflow: hidden;
        }

        body {
            position: relative;
            width: 100%;
            height: 100vh;
            transform-style: preserve-3d;
            opacity: 0;
            background-color: transparent;
            border: 1px solid #ddd;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        body.show {
            opacity: 1;
        }

        body.flip {
            animation: flipPaper 1.2s ease-out forwards;
        }

        @keyframes flipPaper {
            0% {
                transform: rotateY(180deg) translateZ(0);
            }
            100% {
                transform: rotateY(0deg) translateZ(0);
            }
        }

        h1 {
            position: absolute;
            width: 100%;
            text-align: center;
            backface-visibility: hidden;
            padding-top: 120px;  /* Move ABOUT text down using padding instead */
        }

        .front {
            transform: rotateY(0deg);
            background-color: white;
            width: 100%;
            height: 100%;
            position: absolute;
            backface-visibility: hidden;
        }

        .back {
            transform: rotateY(180deg);
            background-color: #f8f8f8;
            width: 100%;
            height: 100%;
            position: absolute;
            backface-visibility: hidden;
        }
    </style>
</head>
<body>
    <h1 class="front">ABOUT</h1>
    <h1 class="back">ABOUT</h1>

    <script type="module">
        import { FLAGS } from '../../common';
        
        // Remove localStorage state for testing
        localStorage.removeItem('about_has_played');

        window.trigger_frame_animation = function() {
            if(FLAGS.HTML_LOGS) {
                console.log('Animation triggered - localStorage state:', localStorage.getItem('about_has_played'));
            }
            
            if(!localStorage.getItem('about_has_played')) {
                if(FLAGS.HTML_LOGS) {
                    console.log('First time - playing animation');
                }
                
                // First make the page visible
                document.body.classList.add('show');
                
                // Small delay before starting the flip animation
                setTimeout(() => {
                    document.body.classList.add('flip');
                }, 100);
                
                localStorage.setItem('about_has_played', true);
            } else {
                if(FLAGS.HTML_LOGS) {
                    console.log('Already played - showing final state');
                }
                // Show the page in its final flipped state
                document.body.classList.add('show');
                document.body.style.transform = 'rotateY(0deg)';
            }
        };
    </script>
</body>
</html>
